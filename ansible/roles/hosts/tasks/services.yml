---
# file: tasks/services.yml

- name: services - enable/disable hosts services
  when: hosts_services is defined and ansible_service_mgr|lower != "openrc"
  with_items: "{{ hosts_services|default([]) }}"
  service:
    name: "{{item.name}}"
    state: "{{item.state}}"
    enabled: "{{item.enabled}}"
  become: yes

- name: services - openrc - enable/disable hosts services
  when: hosts_services is defined and ansible_service_mgr|lower == "openrc"
  with_items: "{{ hosts_services|default([]) }}"
  service:
    name: "{{item.name}}"
    state: "{{item.state}}"
    enabled: "{{item.enabled}}"
    runlevel: boot
  become: yes

